# ----------------------------------------------------------------------------
# Trivadis AG, Infrastructure Managed Services
# Saegereistrasse 29, 8152 Glattbrugg, Switzerland
# ----------------------------------------------------------------------------
# Name.......: mdlint.yaml 
# Author.....: Stefan Oehrli (oes) stefan.oehrli@trivadis.com
# Editor.....: Stefan Oehrli
# Date.......: 2021.02.23
# Revision...: 
# Purpose....: Markdown lint workflow for GitHub
# Notes......: --
# Reference..: https://github.com/DavidAnson/markdownlint
#              https://github.com/DavidAnson/markdownlint-cli2-action
# ----------------------------------------------------------------------------
name: markdown-lint

on:
  push:
    branches: [ main ]
    paths-ignore:
      - '.github/**'

  pull_request:
    branches: [ main ]
    paths-ignore:
      - '.github/**'

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
#   check:
#     name: Check Markdown Lint
#     runs-on: ubuntu-latest
#     steps:
#       # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
#       - uses: actions/checkout@v2
#       - name: markdownlint-cli2-action
#         # You may pin to the exact commit or the version.
#         # uses: DavidAnson/markdownlint-cli2-action@df5e41bfe87014dffa695c68b9fb66565e43140a
#         uses: DavidAnson/markdownlint-cli2-action@v2
#         with:
#           globs: |
#             **/*.md
#             ! CHANGELOG.md

  my_markdownlint_job:
    image:
      name: 06kellyjac/markdownlint-cli
      # or to use the image from GitLab rather than Docker Hub
      # replace it with the line below
      # name: registry.gitlab.com/06kellyjac/docker_markdownlint-cli:0.27.0-alpine
      entrypoint:
        - "/usr/bin/env"
        - "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
    before_script:
      - markdownlint --version
    script:
      - markdownlint .
# --- EOF -------------------------------------------------------------------
